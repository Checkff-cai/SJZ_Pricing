<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>胖虎SJZ_Price</title>
    <style>
        :root { --primary: #2c3e50; --accent: #27ae60; --orange: #f39c12; --blue: #0984e3; --red: #d63031; }
        body { 
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif; 
            margin: 0; padding: 10px; min-height: 100vh;
            display: flex; align-items: center; justify-content: center;
            background: url('https://files.catbox.moe/mzhhpx.png') no-repeat center center fixed;
            background-size: cover;
        }
        .card { 
            max-width: 450px; width: 100%;
            background: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(5px);
            padding: 20px; border-radius: 15px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.3); 
            box-sizing: border-box;
        }
        h2 { text-align: center; color: var(--primary); margin: 0 0 15px 0; border-bottom: 3px solid var(--orange); padding-bottom: 8px; }
        .group { margin-bottom: 12px; }
        label { display: block; font-size: 14px; color: #333; margin-bottom: 5px; font-weight: bold; }
        input, select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 8px; font-size: 15px; box-sizing: border-box; }
        .checkbox-group { display: flex; align-items: center; gap: 8px; background: #fff9e6; padding: 10px; border-radius: 8px; margin-bottom: 10px; cursor: pointer; }
        .checkbox-group input { width: auto; }
        .energy-box { display: none; background: #eef2f7; padding: 12px; border-radius: 8px; margin-bottom: 12px; border-left: 5px solid #3498db; }
        .skin-box { background: #fdf2e9; padding: 12px; border-radius: 8px; margin-bottom: 15px; }
        .skin-list { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 8px; }
        .skin-item { display: flex; align-items: center; font-size: 13px; gap: 5px; }
        .skin-item input { width: auto; }
        .result { border-top: 2px dashed #bbb; padding-top: 15px; }
        .row { margin-bottom: 12px; }
        .row-label { font-weight: bold; color: #444; font-size: 14px; display: block; margin-bottom: 4px; }
        .row-formula { font-family: 'Consolas', monospace; background: #f8f9fa; padding: 10px; border-radius: 6px; display: block; border: 1px solid #eee; font-size: 15px; font-weight: bold; }
        /* 进价颜色设定 */
        #inFormula { color: var(--blue); }
        /* 出价颜色设定 */
        #outFormula { color: var(--red); }
        .profit-row { background: #e8f5e9; padding: 15px; border-radius: 10px; font-weight: bold; color: #2e7d32; font-size: 18px; display: flex; justify-content: space-between; align-items: center; }
        .val-total { color: #e67e22; }
    </style>
</head>
<body>

<div class="card">
    <h2>胖虎SJZ_Price</h2>
    
    <div class="group">
        <label>纯币数量 (输入70代表7000万)</label>
        <input type="number" id="coins" placeholder="输入百万单位, 如: 47" oninput="calculate()">
    </div>

    <div class="group">
        <label>安全箱等级</label>
        <select id="box" onchange="updateUI()">
            <option value="9">9格箱 (基准 1:38)</option>
            <option value="6">6格箱 (基准 1:40)</option>
            <option value="4">4格箱 (基准 1:44)</option>
        </select>
    </div>

    <div class="checkbox-group" onclick="toggleLowEnergy()">
        <input type="checkbox" id="lowEnergy" onchange="updateUI()" onclick="event.stopPropagation()">
        <label style="margin-bottom:0; cursor:pointer;">体力偏低 (影响收号比例)</label>
    </div>

    <div id="energySection" class="energy-box">
        <label>选择具体体力/比例变化</label>
        <select id="energyType" onchange="calculate()"></select>
    </div>

    <div class="group" style="display: flex; gap: 10px;">
        <div style="flex: 1;">
            <label>六头六甲(个)</label>
            <input type="number" id="armor" value="0" min="0" oninput="calculate()">
        </div>
        <div style="flex: 1;">
            <label>AW子弹(发)</label>
            <input type="number" id="ammo" value="0" min="0" oninput="calculate()">
        </div>
    </div>

    <div class="skin-box">
        <label>名牌皮肤 (每一个+100押金)</label>
        <div class="skin-list">
            <div class="skin-item"><input type="checkbox" class="skin-chk" onchange="calculate()">赤霄/蝴蝶刀</div>
            <div class="skin-item"><input type="checkbox" class="skin-chk" onchange="calculate()">黑海/北极星</div>
            <div class="skin-item"><input type="checkbox" class="skin-chk" onchange="calculate()">信条/玫瑰</div>
            <div class="skin-item"><input type="checkbox" class="skin-chk" onchange="calculate()">水墨/吴彦祖</div>
        </div>
    </div>

    <div class="result">
        <div class="row">
            <span class="row-label">收号进价 (币价 + 装备):</span>
            <span class="row-formula" id="inFormula">0 + 0 = ¥ 0.00</span>
        </div>
        <div class="row">
            <span class="row-label">租号出价 (币价 + 装备 + 押金):</span>
            <span class="row-formula" id="outFormula">0 + 0 + 100 = ¥ 0.00</span>
        </div>
        <div class="profit-row">
            <span>预期利润:</span>
            <span class="val-total">¥ <span id="profit">0.00</span></span>
        </div>
    </div>
</div>

<script>
function toggleLowEnergy() {
    const chk = document.getElementById('lowEnergy');
    chk.checked = !chk.checked;
    updateUI();
}

function updateUI() {
    const box = document.getElementById('box').value;
    const isLow = document.getElementById('lowEnergy').checked;
    const energySection = document.getElementById('energySection');
    const energyType = document.getElementById('energyType');

    if (isLow && (box === "9" || box === "6")) {
        energySection.style.display = "block";
        energyType.innerHTML = "";
        if (box === "9") {
            // 9格6体1:39, 4体1:42 [cite: 24]
            energyType.innerHTML = `<option value="39">9格/6体力 (1:39)</option><option value="42">9格/4体力 (1:42)</option>`;
        } else if (box === "6") {
            // 6格6体1:41, 4体1:42 [cite: 24]
            energyType.innerHTML = `<option value="41">6格/6体力 (1:41)</option><option value="42">6格/4体力 (1:42)</option>`;
        }
    } else {
        energySection.style.display = "none";
    }
    calculate();
}

function calculate() {
    const inputCoins = parseFloat(document.getElementById('coins').value) || 0;
    const coinsInWan = inputCoins * 100; // 转换百万单位 [cite: 8]
    const box = document.getElementById('box').value;
    const isLow = document.getElementById('lowEnergy').checked;
    const armor = parseInt(document.getElementById('armor').value) || 0;
    const ammo = parseInt(document.getElementById('ammo').value) || 0;

    // 1. 进价计算逻辑 [cite: 6, 7, 8]
    let inRatio = (box === "9") ? 38 : (box === "6" ? 40 : 44);
    if (isLow && (box === "9" || box === "6")) {
        inRatio = parseInt(document.getElementById('energyType').value);
    }
    
    const coinInPrice = coinsInWan / inRatio;
    const equipInPrice = (armor * 2) + (ammo * 1); // 进价装备: 头甲2, 子弹1 [cite: 13, 14]
    const totalInPrice = coinInPrice + equipInPrice;

    // 2. 出价计算逻辑 [cite: 17, 18]
    const outRatio = 28; // 出号比例一律1:28
    const coinOutPrice = coinsInWan / outRatio;
    const equipOutPrice = (armor * 3) + (ammo * 1.5); // 出号装备: 头甲3, 子弹1.5
    
    // 3. 押金逻辑 
    let deposit = 100; // 基础押金一百
    const skinChecks = document.querySelectorAll('.skin-chk');
    skinChecks.forEach(chk => { if(chk.checked) deposit += 100; });

    const totalOutPrice = coinOutPrice + equipOutPrice + deposit;

    // 4. 显示结果
    document.getElementById('inFormula').innerText = 
        `${coinInPrice.toFixed(1)} + ${equipInPrice} = ¥ ${totalInPrice.toFixed(2)}`;
    
    document.getElementById('outFormula').innerText = 
        `${coinOutPrice.toFixed(1)} + ${equipOutPrice} + ${deposit} = ¥ ${totalOutPrice.toFixed(2)}`;
    
    // 利润显示 
    document.getElementById('profit').innerText = (totalOutPrice - totalInPrice - deposit).toFixed(2);
}

updateUI();
</script>

</body>
</html>